{"version":3,"file":"index.esm.js","sources":["../src/VisionScanner.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useEffect } from \"react\";\nimport { VisionScannerProps } from \"./types\";\nimport \"./styles.css\";\n\nexport const VisionScanner = ({ onCapture, facingMode = \"environment\" }: VisionScannerProps) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    navigator.mediaDevices\n      .getUserMedia({ video: { facingMode } })\n      .then((stream) => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          videoRef.current.play();\n        }\n      })\n      .catch((err) => console.error(\"Camera error:\", err));\n\n    return () => {\n      if (videoRef.current?.srcObject) {\n        (videoRef.current.srcObject as MediaStream).getTracks().forEach(track => track.stop());\n      }\n    };\n  }, [facingMode]);\n\n  const capture = () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    canvas.getContext(\"2d\")?.drawImage(video, 0, 0, canvas.width, canvas.height);\n    const image = canvas.toDataURL(\"image/jpeg\");\n    onCapture(image);\n  };\n\n  return (\n    <div className=\"vision-scanner\">\n      <video ref={videoRef} className=\"vision-scanner-video\" />\n      <canvas ref={canvasRef} className=\"vision-scanner-canvas\" />\n      <button onClick={capture} className=\"vision-scanner-capture\">Scan</button>\n    </div>\n  );\n};"],"names":["_jsxs","_jsx"],"mappings":";;;AAMO,IAAM,aAAa,GAAG,UAAC,EAA6D,EAAA;AAA3D,IAAA,IAAA,SAAS,eAAA,EAAE,EAAA,GAAA,EAAA,CAAA,UAA0B,EAA1B,UAAU,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,aAAa,GAAA,EAAA,CAAA;AACnE,IAAA,IAAM,QAAQ,GAAG,MAAM,CAAmB,IAAI,CAAC,CAAC;AAChD,IAAA,IAAM,SAAS,GAAG,MAAM,CAAoB,IAAI,CAAC,CAAC;AAElD,IAAA,SAAS,CAAC,YAAA;AACR,QAAA,SAAS,CAAC,YAAY;aACnB,YAAY,CAAC,EAAE,KAAK,EAAE,EAAE,UAAU,EAAA,UAAA,EAAE,EAAE,CAAC;aACvC,IAAI,CAAC,UAAC,MAAM,EAAA;AACX,YAAA,IAAI,QAAQ,CAAC,OAAO,EAAE;AACpB,gBAAA,QAAQ,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;AACpC,gBAAA,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACzB;AACH,SAAC,CAAC;AACD,aAAA,KAAK,CAAC,UAAC,GAAG,EAAK,EAAA,OAAA,OAAO,CAAC,KAAK,CAAC,eAAe,EAAE,GAAG,CAAC,CAAnC,EAAmC,CAAC,CAAC;QAEvD,OAAO,YAAA;;AACL,YAAA,IAAI,MAAA,QAAQ,CAAC,OAAO,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,SAAS,EAAE;gBAC9B,QAAQ,CAAC,OAAO,CAAC,SAAyB,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,UAAA,KAAK,EAAA,EAAI,OAAA,KAAK,CAAC,IAAI,EAAE,CAAA,EAAA,CAAC,CAAC;aACxF;AACH,SAAC,CAAC;AACJ,KAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;AAEjB,IAAA,IAAM,OAAO,GAAG,YAAA;;QACd,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO;YAAE,OAAO;AACpD,QAAA,IAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;AAC/B,QAAA,IAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC;AACjC,QAAA,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC;AAChC,QAAA,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,WAAW,CAAC;QAClC,CAAA,EAAA,GAAA,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAC7E,IAAM,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;QAC7C,SAAS,CAAC,KAAK,CAAC,CAAC;AACnB,KAAC,CAAC;AAEF,IAAA,QACEA,IAAK,CAAA,KAAA,EAAA,EAAA,SAAS,EAAC,gBAAgB,aAC7BC,GAAO,CAAA,OAAA,EAAA,EAAA,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAC,sBAAsB,EAAA,CAAG,EACzDA,GAAQ,CAAA,QAAA,EAAA,EAAA,GAAG,EAAE,SAAS,EAAE,SAAS,EAAC,uBAAuB,EAAA,CAAG,EAC5DA,GAAQ,CAAA,QAAA,EAAA,EAAA,OAAO,EAAE,OAAO,EAAE,SAAS,EAAC,wBAAwB,EAAc,QAAA,EAAA,MAAA,EAAA,CAAA,CAAA,EAAA,CACtE,EACN;AACJ;;;;"}